feudal_authority_mechanic = {
	alert_icon_gfx = GFX_alerticons_government_mechanics
	alert_icon_index = 5
	available = {
        OR = {
		current_age = medieval_age
        current_age = age_of_discovery
        }
	}

	powers = {
		feudal_authority = {
			max = 100
			min = 0
			default = 50
			reset_on_new_ruler = yes
			base_monthly_growth = -0.1
			development_scaled_monthly_growth = 0.05
			is_good = yes
			
			# Scaled modifiers based on authority level
			scaled_modifier = {
				start_value = 0
				end_value = 100
				modifier = {
					global_tax_modifier = 0.10
					global_manpower_modifier = 0.10
					stability_cost_modifier = -0.20
					core_creation = -0.10
				}
			}
			
			# Range modifiers for different authority levels
			range_modifier = {
				start_value = 80
				end_value = 100
				modifier = {
					legitimacy = 1.0
					all_estate_loyalty_equilibrium = 0.10
				}
			}
			
			range_modifier = {
				start_value = 60
				end_value = 79
				modifier = {
					legitimacy = 0.5
					global_unrest = -1
				}
			}
			
			range_modifier = {
				start_value = 40
				end_value = 59
				modifier = {
					# Neutral range - no special bonuses or penalties
				}
			}
			
			range_modifier = {
				start_value = 20
				end_value = 39
				modifier = {
					global_unrest = 1
					legitimacy = -0.5
					all_estate_influence_modifier = 0.15
				}
			}
			
			range_modifier = {
				start_value = 0
				end_value = 19
				modifier = {
					global_unrest = 3
					legitimacy = -1.0
					all_estate_influence_modifier = 0.30
					stability_cost_modifier = 0.25
				}
			}
			
			# Events triggered at max/min authority
			on_max_reached = {
			}
			
			on_min_reached = {
			}
		}
	}
	
	interactions = {
        
		royal_progress = {
            icon = GFX_royal_progress
			cost_type = feudal_authority
			cost = 0
			trigger = {
				adm_power = 50
				NOT = { has_country_modifier = recent_royal_progress }
			}
			effect = {
				add_adm_power = -50
				add_government_power = {
					mechanic_type = feudal_authority_mechanic
					power_type = feudal_authority
					value = 15
				}
				add_country_modifier = {
					name = recent_royal_progress
					duration = 1825 # 5 years
					desc = "Recent royal progress through the realm"
				}
			}
			cooldown_years = 5
			ai_chance = {
				factor = 75
				modifier = {
					factor = 2
					has_government_power = {
						mechanic_type = feudal_authority_mechanic
						power_type = feudal_authority
						value = 30
					}
					NOT = {
						has_government_power = {
							mechanic_type = feudal_authority_mechanic
							power_type = feudal_authority
							value = 60
						}
					}
				}
			}
		}
		
		summon_estates = {
            icon = GFX_summon_estates
			cost_type = feudal_authority
			cost = 10
			trigger = {
				dip_power = 25
				NOT = { has_country_modifier = estates_recently_summoned }
			}
			effect = {
				add_dip_power = -25
				random_list = {
					40 = {
						add_government_power = {
							mechanic_type = feudal_authority_mechanic
							power_type = feudal_authority
							value = 8
						}
						add_country_modifier = {
							name = successful_estate_summons
							duration = 730
						}
					}
					35 = {
						add_government_power = {
							mechanic_type = feudal_authority_mechanic
							power_type = feudal_authority
							value = 20
						}
					}
					25 = {
						add_government_power = {
							mechanic_type = feudal_authority_mechanic
							power_type = feudal_authority
							value = -5
						}
						add_country_modifier = {
							name = failed_estate_summons
							duration = 365
						}
					}
				}
				add_country_modifier = {
					name = estates_recently_summoned
					duration = 730
				}
			}
			cooldown_years = 2
			ai_chance = {
				factor = 50
				modifier = {
					factor = 2
					has_government_power = {
						mechanic_type = feudal_authority_mechanic
						power_type = feudal_authority
						value = 40
					}
					NOT = {
						has_government_power = {
							mechanic_type = feudal_authority_mechanic
							power_type = feudal_authority
							value = 70
						}
					}
				}
			}
		}
		
		call_feudal_levy = {
            icon = GFX_call_feudal_levy
			cost_type = feudal_authority
			cost = 25
			trigger = {
				is_at_war = yes
				NOT = { has_country_modifier = feudal_levy_called }
				has_government_power = {
					mechanic_type = feudal_authority_mechanic
					power_type = feudal_authority
					value = 40
				}
			}
			effect = {
				add_country_modifier = {
					name = feudal_levy_raised
					duration = 1095 # 3 years
				}
				add_country_modifier = {
					name = feudal_levy_called
					duration = 3650 # 10 years
				}
			}
			cooldown_years = 10
			ai_chance = {
				factor = 60
				modifier = {
					factor = 2
					is_in_war = {
						defender_leader = THIS
					}
				}
				modifier = {
					factor = 1.5
					war_exhaustion = 3
				}
			}
		}
	}
}