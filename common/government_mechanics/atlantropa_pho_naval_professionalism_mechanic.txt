pho_naval_professionalism_mechanic = {
	alert_icon_gfx = GFX_alerticons_government_mechanics
	alert_icon_index = 15

	available = {
		OR = {
			has_reform = venice_merchants_reform
			has_reform = merchants_reform
			has_reform = phoenice_merchants_reform
			has_reform = norse_viking_republic_reform
			has_country_flag = navy_availible
		}
	}

	powers = {
		phoenican_naval_professionalism = {
			gui = atlantropa_naval_gov_mech
			max = 100
			min = 0
			base_monthly_growth = -0.5
			development_scaled_monthly_growth = 0.025
			
			# Pierwsze pasmo - podstawowe bonusy (0-40)
			scaled_modifier = {
				start_value = 0
				end_value = 40
				modifier = {
					global_ship_trade_power = 0.15
					disengagement_chance = 0.05
					number_of_cannons_modifier = 0.05
					monthly_phoenican_naval_professionalism = -0.15
				}
			}
			
			# Drugie pasmo - średnie bonusy (40-70)
			scaled_modifier = {
				start_value = 40
				end_value = 70
				modifier = {
					global_ship_trade_power = 0.25
					disengagement_chance = 0.1
					number_of_cannons_modifier = 0.1
					naval_morale = 0.15
					ship_durability = 0.1
					monthly_phoenican_naval_professionalism = -0.25
				}
			}
			
			# Trzecie pasmo - zaawansowane bonusy (70-100)
			scaled_modifier = {
				start_value = 70
				end_value = 100
				modifier = {
					global_ship_trade_power = 0.4
					disengagement_chance = 0.2
					number_of_cannons_modifier = 0.2
					naval_morale = 0.3
					ship_durability = 0.2
					capture_ship_chance = 0.1
					naval_tradition = 0.5
					monthly_phoenican_naval_professionalism = -0.4
				}
			}
			
			# Bonus za wysokie wartości (80-100)
			range_modifier = {
				start_value = 80
				end_value = 100
				modifier = {
					global_naval_engagement_modifier = 0.25
					recover_navy_morale_speed = 0.3
					blockade_efficiency = 0.2
				}
			}
			
			# Kara za niskie wartości (0-20)
			range_modifier = {
				start_value = 0
				end_value = 20
				modifier = {
					naval_maintenance_modifier = 0.15
					global_ship_recruit_speed = 0.2
					naval_attrition = 0.1
				}
			}
			
			# Event przy maksymalnej wartości
			on_max_reached = {
				custom_tooltip = naval_prof_max_reached_tt
				hidden_effect = {
					# 80% szans na pozytywny modifier
					random_list = {
						80 = {
							add_country_modifier = {
								name = "elite_naval_doctrine"
								duration = 3650
							}
							add_navy_tradition = 15
							add_prestige = 10
						}
						20 = {
							add_country_modifier = {
								name = "naval_overconfidence"
								duration = 1095
							}
							add_navy_tradition = -5
						}
					}
				}
			}
			
			# Event przy minimalnej wartości
			on_min_reached = {
				custom_tooltip = naval_prof_min_reached_tt
				hidden_effect = {
					# 90% szans na negatywny modifier
					random_list = {
						90 = {
							add_country_modifier = {
								name = "naval_decline"
								duration = 1825
							}
							add_navy_tradition = -10
							add_prestige = -5
						}
						10 = {
							add_country_modifier = {
								name = "naval_reformation"
								duration = 1095
							}
							add_navy_tradition = 5
						}
					}
				}
			}
		}
	}

	interactions = {
		boost_naval_professionalism = {
 
			cooldown_years = 3
			icon = GFX_naval_professionalism_button_1
			
			trigger = {
				dip_power = 100
				manpower_percentage = 0.15
				NOT = {
					has_government_power = {
						mechanic_type = pho_naval_professionalism_mechanic
						power_type = phoenican_naval_professionalism
						value = 95
					}
				}
			}
			
			effect = {
				add_dip_power = -100
				add_yearly_manpower = -1.5
				add_yearly_sailors = 1.5
				add_government_power = {
					mechanic_type = pho_naval_professionalism_mechanic
					power_type = phoenican_naval_professionalism
					value = 8
				}
				
				custom_tooltip = naval_prof_training_outcome_tt
				hidden_effect = {
					# Szansa na dodatkowe bonusy - 25% na sukces
					random_list = {
						25 = {
							add_navy_tradition = 8
							add_country_modifier = {
								name = "exceptional_naval_training"
								duration = 1095
							}
						}
						75 = { 
							# Szansa na niewielkie negatywne skutki - 10% z tych 75%
							random_list = {
								10 = {
									add_yearly_manpower = -0.5
									add_country_modifier = {
										name = "training_casualties"
										duration = 365
									}
								}
								90 = { }
							}
						}
					}
				}
			}
			
			ai_chance = {
				factor = 10
				modifier = {
					factor = 2
					NOT = {
						has_government_power = {
							mechanic_type = pho_naval_professionalism_mechanic
							power_type = phoenican_naval_professionalism
							value = 60
						}
					}
				}
				modifier = {
					factor = 0.5
					has_government_power = {
						mechanic_type = pho_naval_professionalism_mechanic
						power_type = phoenican_naval_professionalism
						value = 80
					}
				}
				modifier = {
					factor = 0
					NOT = { dip_power = 200 }
				}
			}
		}
		
		boost_naval_professionalism2 = {
 
			cooldown_years = 4
			icon = GFX_naval_professionalism_button_2
			
			trigger = {
				dip_tech = 8
				dip_power = 125
				years_of_income = 0.75
				num_of_heavy_ship = 3
				NOT = {
					has_government_power = {
						mechanic_type = pho_naval_professionalism_mechanic
						power_type = phoenican_naval_professionalism
						value = 95
					}
				}
			}
			
			effect = {
				add_dip_power = -125
				add_years_of_income = -0.75
				
				# Tworzenie floty z doświadczonymi kapitanami
				random_owned_province = {
					limit = { has_port = yes }
					ROOT = {
						heavy_ship = PREV
					}
				}
				random_owned_province = {
					limit = { has_port = yes }
					ROOT = {
						heavy_ship = PREV
					}
				}
				random_owned_province = {
					limit = { has_port = yes }
					ROOT = {
						heavy_ship = PREV
					}
				}
				
				# Dodatkowe bonusy w zależności od poziomu profesjonalizmu
				if = {
					limit = {
						has_government_power = {
							mechanic_type = pho_naval_professionalism_mechanic
							power_type = phoenican_naval_professionalism
							value = 50
						}
					}
					add_country_modifier = {
						name = "advanced_naval_construction"
						duration = 1825
					}
				}
				
				add_government_power = {
					mechanic_type = pho_naval_professionalism_mechanic
					power_type = phoenican_naval_professionalism
					value = 12
				}
				
				custom_tooltip = naval_prof_fleet_construction_tt
				hidden_effect = {
					# Szansa na dodatkową flotę - 30% na sukces
					random_list = {
						30 = {
							# Dodatkowe 2 ciężkie statki
							random_owned_province = {
								limit = { has_port = yes }
								ROOT = {
									heavy_ship = PREV
									heavy_ship = PREV
								}
							}
							add_country_modifier = {
								name = "superior_naval_construction"
								duration = 1825
							}
						}
						70 = {
							# Szansa na problemy konstrukcyjne - 15% z tych 70%
							random_list = {
								15 = {
									add_years_of_income = -0.25
									add_country_modifier = {
										name = "construction_delays"
										duration = 730
									}
								}
								85 = { }
							}
						}
					}
					
					# Dodatkowa szansa na elitarną załogę przy wysokim profesjonalizmie
					if = {
						limit = {
							has_government_power = {
								mechanic_type = pho_naval_professionalism_mechanic
								power_type = phoenican_naval_professionalism
								value = 70
							}
						}
						random_list = {
							40 = {
								add_country_modifier = {
									name = "elite_naval_crews"
									duration = 1095
								}
							}
							60 = { }
						}
					}
				}
			}
			
			ai_chance = {
				factor = 8
				modifier = {
					factor = 1.5
					has_government_power = {
						mechanic_type = pho_naval_professionalism_mechanic
						power_type = phoenican_naval_professionalism
						value = 40
					}
				}
				modifier = {
					factor = 0.3
					has_government_power = {
						mechanic_type = pho_naval_professionalism_mechanic
						power_type = phoenican_naval_professionalism
						value = 75
					}
				}
				modifier = {
					factor = 0
					NOT = { treasury = 500 }
				}
			}
		}
		
		boost_naval_professionalism3 = {
  
			cooldown_years = 5
			icon = GFX_naval_professionalism_button_3
			
			trigger = {
				dip_power = 75
				mil_power = 75
				navy_tradition = 20
				NOT = {
					has_government_power = {
						mechanic_type = pho_naval_professionalism_mechanic
						power_type = phoenican_naval_professionalism
						value = 95
					}
				}
			}
			
			effect = {
				add_dip_power = -75
				add_mil_power = -75
				
				# Tworzenie elitarnego admirała
				create_admiral = { 
					tradition = 75
					add_fire = 1
					add_shock = 1
				}
				
				# Bonusy w zależności od poziomu
				if = {
					limit = {
						has_government_power = {
							mechanic_type = pho_naval_professionalism_mechanic
							power_type = phoenican_naval_professionalism
							value = 60
						}
					}
					add_country_modifier = {
						name = "elite_naval_officers"
						duration = 2555
					}
				}
				
				add_government_power = {
					mechanic_type = pho_naval_professionalism_mechanic
					power_type = phoenican_naval_professionalism
					value = 10
				}
				
				custom_tooltip = naval_prof_officer_training_tt
				hidden_effect = {
					# Szansa na drugiego admirała przy wysokim profesjonalizmie
					if = {
						limit = {
							has_government_power = {
								mechanic_type = pho_naval_professionalism_mechanic
								power_type = phoenican_naval_professionalism
								value = 80
							}
						}
						random_list = {
							40 = {
								create_admiral = { tradition = 60 }
								add_country_modifier = {
									name = "naval_academy_excellence"
									duration = 1460
								}
							}
							60 = { }
						}
					}
					
					# Szansa na morskie odkrycia - 35% na sukces
					random_list = {
						35 = {
							# Dodatkowe bonusy do eksploracji
							add_country_modifier = {
								name = "naval_exploration_expertise"
								duration = 1825
							}
							add_dip_power = 50
						}
						65 = {
							# Szansa na utratę oficera - 8% z tych 65%
							random_list = {
								8 = {
									add_mil_power = -25
									add_country_modifier = {
										name = "officer_training_setback"
										duration = 365
									}
								}
								92 = { }
							}
						}
					}
					
					# Dodatkowa szansa na legendary admirała przy maksymalnym profesjonalizmie
					if = {
						limit = {
							has_government_power = {
								mechanic_type = pho_naval_professionalism_mechanic
								power_type = phoenican_naval_professionalism
								value = 95
							}
						}
						random_list = {
							20 = {
								create_admiral = { 
									tradition = 100
									add_fire = 2
									add_shock = 2
									add_manuever = 1
								}
								add_country_modifier = {
									name = "legendary_naval_commander"
									duration = 7300
								}
							}
							80 = { }
						}
					}
				}
			}
			
			ai_chance = {
				factor = 12
				modifier = {
					factor = 2
					navy_tradition = 40
				}
				modifier = {
					factor = 0.4
					has_government_power = {
						mechanic_type = pho_naval_professionalism_mechanic
						power_type = phoenican_naval_professionalism
						value = 70
					}
				}
				modifier = {
					factor = 0
					NOT = { mil_power = 150 }
				}
				modifier = {
					factor = 0
					NOT = { dip_power = 150 }
				}
			}
		}
	}
}