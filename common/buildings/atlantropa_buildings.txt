#### MODDED BUILDINGS 
# Mining Building: Deep Mine
deep_mine = {
    cost = 300
    time = 24
    one_per_country = no
    allow_in_gold_provinces = no
    onmap = no
    
    potential = {
        always = yes
    }

    modifier = {
        global_trade_goods_size_modifier = 0.05
    }
    
	ai_will_do = {
		factor = 1
	}
}

atlantropa_mining_complex = {
    cost = 600
    time = 32
    make_obsolete = deep_mine
    one_per_country = no
    allow_in_gold_provinces = no
    onmap = no
    
    potential = {
        always = yes
    }


    modifier = {
       global_trade_goods_size_modifier = 0.1	
        allowed_num_of_buildings = 1
        local_tax_modifier = 0.05
    }
	ai_will_do = {
		factor = 1
	}
}

atlantropa_road = {
    cost = 75
    time = 6

    one_per_country = no
    allow_in_gold_provinces = yes
    onmap = no
	potential = {
		always = yes
	}
    modifier = {
    	province_trade_power_modifier = 0.05
		local_tax_modifier = 0.05
		allowed_num_of_buildings = 1
		local_friendly_movement_speed = 0.25
		local_hostile_movement_speed = 0.2
		local_development_cost = -0.025
    }
    ai_will_do = {
        factor = 1
    }
}

atlantropa_tracks = {
    cost = 500
    time = 16
	make_obsolete = atlantropa_road

    one_per_country = no
    allow_in_gold_provinces = yes
    onmap = no
	potential = {
		always = yes
	}
    modifier = {
    	province_trade_power_modifier = 0.1
		local_tax_modifier = 0.1
		allowed_num_of_buildings = 2
		local_friendly_movement_speed = 0.5
		local_hostile_movement_speed = 0.4
		local_development_cost = -0.075
		local_production_efficiency = 0.10
    }
    ai_will_do = {
        factor = 1
    }
}




atlantropa_factory = {
	cost = 2000
	time = 24
	#VU AddOn price changed from 400 to 200. Part of the comprehensive balance overhaul to adjust buildings to the VU map (with all its new provinces).
	#VU AddOn time changed from 12 to 24. Doubling upgraded buildings' build time.
	
	make_obsolete = counting_house
	modifier = {
		#Modifier is now 75% instead of the EU4 100% or the VU 60%. It should be balanced for the extra provinces of VU while still being worth its price.
		local_production_efficiency = 1.25
	}
	
	on_built = {
		add_development_from_upgrading_or_building = {
			building = atlantropa_factory
			obsolete_building = counting_house
			type = production
			value = 2
			upgrade_value = 1
		}
	}
	on_destroyed = {
		remove_development_from_building = {
			building = atlantropa_factory
			type = production
			value = 2
		}
	}
	on_obsolete = {
	}

	allow_in_gold_provinces = no

	ai_will_do = {
		factor = 4
		
		#ECONOMY 101
		#AI avoids building with loans
		modifier = {
			factor = 0
			owner = { num_of_loans = 3 }
		}
		modifier = {
			factor = 0.3
			owner = { num_of_loans = 2 }
		}
		modifier = {
			factor = 0.5
			owner = { num_of_loans = 1 }
		}
		
		#AI avoids building when in deficit
		modifier = {
			factor = 0.75
			owner = { is_in_deficit = yes }
		}
		
		#AI will try to stockpile some amount of money
		modifier = {
			factor = 0.75
			owner = { NOT = { treasury = 400 } }
		}
		
		#SPECIFIC
		#AI more likely to build in provinces with high development
		modifier = {
			factor = 2.5
			development = 15
		}
		modifier = {
			factor = 2.5
			development = 21
		}
		modifier = {
			factor = 2.5
			development = 30
		}
		modifier = {
			factor = 1.5
			base_production = 3
		}
		modifier = {
			factor = 3.5
			base_production = 5
		}
		modifier = {
			factor = 6.5
			base_production = 7
		}
		
		#GENERAL		
		#AI is strongly discouraged to build this where climate renders development difficult.
		modifier = {
			factor = 0.2
			OR = {
				has_climate = arctic
				has_climate = arid
				has_climate = tropical
			}
		}
		
		#AI is discouraged to build this where development isn't really feasible.
		modifier = {
			factor = 0.65
			OR = {
				has_terrain = steppe
				has_terrain = highlands
				has_terrain = jungle
				has_terrain = desert
				has_terrain = coastal_desert
				has_terrain = glacier
			}
		}
		
		#Drylands, forest, coastline, marsh, hills, mountains, and savannah receive neither penalty nor bonus.
		
		#AI is encouraged to build this where development is feasible.
		modifier = {
			factor = 1.5
			OR = {
				has_terrain = farmlands
				has_terrain = grasslands
				has_terrain = woods
			}
		}
		
		#Removed for now. Massive gov changes in 1.26 make this not an easy 1 to 1 update
		#modifier = {
		#	factor = 1.5
		#	FROM = {			#Economically minded governments are more likely to build workshops... that is rather their mandate, no?
		#		OR = {
		#			government = administrative_monarchy
		#			government = administrative_republic
		#			government = constitutional_republic
		#			government = peasants_republic
		#		}
		#	}
		#}
		
		#HRE was a production powerhouse of this period.
		modifier = {
			factor = 2.0
			is_part_of_hre = yes
		}
	}
}


atlantropa_superfortress = {
    cost = 1500
    time = 50
 build_trigger = {
		OR = {
			has_building = fort_15th
			has_building = fort_16th
			has_building = fort_17th
			has_building = fort_18th
		}
	}
	modifier = {
		local_hostile_attrition = 1
		local_defensiveness = 0.5
		fort_level = 2	
	}
	onmap = no

	on_built = {

	}
	
	on_destroyed = {

	}
	ai_will_do = {
		factor = 1
				modifier = {
			factor = 0
			owner = { num_of_loans = 3 }
		}
		modifier = {
			factor = 0.3
			owner = { num_of_loans = 2 }
		}
		modifier = {
			factor = 0.5
			owner = { num_of_loans = 1 }
		}
		
		#AI avoids building when in deficit
		modifier = {
			factor = 0.75
			owner = { is_in_deficit = yes }
		}
		
		#AI will try to stockpile some amount of money
		modifier = {
			factor = 0.75
			owner = { NOT = { treasury = 1500 } }
		}
	}

}


atlantropa_superharbour = {
    cost = 1500
    time = 50
 build_trigger = {
		has_port = yes
	}
	modifier = {
		local_ship_repair = 0.5
		local_ship_cost = -0.5
		ship_recruit_speed = -0.5
		hostile_fleet_attrition = 5
		block_slave_raid = yes			
		local_defensiveness = 0.1
		fort_level = 1	

	}
	onmap = no

	on_built = {

	}
	
	on_destroyed = {

	}
	ai_will_do = {
		factor = 1
				modifier = {
			factor = 0
			owner = { num_of_loans = 3 }
		}
		modifier = {
			factor = 0.3
			owner = { num_of_loans = 2 }
		}
		modifier = {
			factor = 0.5
			owner = { num_of_loans = 1 }
		}
		
		#AI avoids building when in deficit
		modifier = {
			factor = 0.75
			owner = { is_in_deficit = yes }
		}
		
		#AI will try to stockpile some amount of money
		modifier = {
			factor = 0.75
			owner = { NOT = { treasury = 400 } }
		}
	}

}

grand_cathedral = {
    cost = 1000
    time = 30
    make_obsolete = cathedral
    one_per_country = no
    allow_in_gold_provinces = yes
    onmap = no
    
    potential = {
        always = yes
    }
    modifier = {
        local_tax_modifier = 0.5
        local_missionary_strength = 0.04
        local_culture_conversion_cost = -0.2
        local_unrest = -1
        allowed_num_of_buildings = 1
    }
    
    on_built = {
        add_base_tax = 1
    }
    
    on_destroyed = {
        add_base_tax = -1
    }
    
    on_obsolete = {
    }
    
    ai_will_do = {
        factor = 1.5
        
        modifier = {
            factor = 0
            owner = { num_of_loans = 2 }
        }
        modifier = {
            factor = 0.5
            owner = { num_of_loans = 1 }
        }
        modifier = {
            factor = 0.75
            owner = { is_in_deficit = yes }
        }
        modifier = {
            factor = 0.75
            owner = { NOT = { treasury = 2000 } }
        }
        modifier = {
            factor = 2
            unrest = 3
        }
        modifier = {
            factor = 1.5
            NOT = { religion = owner }
        }
        modifier = {
            factor = 2
            owner = { 
                OR = {
                    religion = catholic
                    religion = orthodox
                    religion = coptic
                }
            }
        }
    }
}


industrial_district = {
    cost = 3500
    time = 60
    make_obsolete = atlantropa_mining_complex
    one_per_country = no
    allow_in_gold_provinces = no
    onmap = no
    
    potential = {
        always = yes
    }
    
    
    modifier = {
       global_trade_goods_size_modifier = 0.5	
        province_trade_power_modifier = 0.25
        local_tax_modifier = 0.1
        allowed_num_of_buildings = 1
    }
    
    on_built = {
        add_base_production = 3
    }
    
    on_destroyed = {
        add_base_production = -3
    }
    
    ai_will_do = {
        factor = 5
        
        modifier = {
            factor = 0
            owner = { num_of_loans = 1 }
        }
        modifier = {
            factor = 0
            owner = { NOT = { treasury = 7000 } }
        }
        modifier = {
            factor = 3
            development = 25
        }
        modifier = {
            factor = 2.5
            base_production = 8
        }
 
    }
}

royal_observatory = {
    cost = 1600
    time = 40
    one_per_country = yes 
    allow_in_gold_provinces = yes
    onmap = no
    
    potential = {
        always = yes
    }
    
    modifier = {
        technology_cost = -0.05
        local_institution_spread = 0.5
        innovativeness_gain = 0.5
        allowed_num_of_buildings = 1
        local_development_cost = -0.12
    }
    
    ai_will_do = {
        factor = 2.5
        
        modifier = {
            factor = 0
            owner = { num_of_loans = 1 }
        }
        modifier = {
            factor = 0.75
            owner = { is_in_deficit = yes }
        }
        modifier = {
            factor = 0.75
            owner = { NOT = { treasury = 3200 } }
        }
        modifier = {
            factor = 4
            is_capital = yes
        }
        modifier = {
            factor = 3
            development = 30
        }
 
    }
}
diplomatic_embassy = {
    cost = 1200
    time = 30
    one_per_country = yes
    allow_in_gold_provinces = yes
    onmap = no
    
    potential = {
        always = yes
    }
    
    
    modifier = {
        diplomatic_reputation = 1
        improve_relation_modifier = 0.05
        ae_impact = -0.05
        allowed_num_of_buildings = 1
    }
    
    ai_will_do = {
        factor = 2
        
        modifier = {
            factor = 0
            owner = { num_of_loans = 2 }
        }
        modifier = {
            factor = 0.5
            owner = { num_of_loans = 1 }
        }
        modifier = {
            factor = 0.75
            owner = { is_in_deficit = yes }
        }
        modifier = {
            factor = 0.75
            owner = { NOT = { treasury = 2400 } }
        }
        modifier = {
            factor = 3
            is_capital = yes
        }
        modifier = {
            factor = 2
            owner = { 
                OR = {
                    has_idea_group = diplomatic_ideas
                    has_idea_group = influence_ideas
                }
            }
        }
    }
}


central_bank = {
    cost = 2500
    time = 42
    one_per_country = yes
    allow_in_gold_provinces = yes
    onmap = no
    
    potential = {
        always = yes
    }
    
    modifier = {
        province_trade_power_modifier = 0.5
        trade_value_modifier = 0.35
        local_tax_modifier = 0.2
        inflation_reduction = 0.15
        interest = -0.5
        allowed_num_of_buildings = 1
    }
    
    ai_will_do = {
        factor = 2.8
        
        modifier = {
            factor = 0
            owner = { num_of_loans = 1 }
        }
        modifier = {
            factor = 0
            owner = { NOT = { treasury = 5000 } }
        }
        modifier = {
            factor = 4
            province_trade_power = 20
        }
 
        modifier = {
            factor = 2
            owner = { trade_income_percentage = 0.5 }
        }
        modifier = {
            factor = 1.5
            owner = { 
                OR = {
                    has_idea_group = trade_ideas
                    has_idea_group = economic_ideas
                }
            }
        }
    }
}


holy_sanctuary = {
    cost = 1800
    time = 36
    one_per_country = yes
    allow_in_gold_provinces = yes
    onmap = no
    
    potential = {
        always = yes
    }
    
    
    modifier = {
        local_tax_modifier = 0.5
        local_missionary_strength = 0.06
        local_culture_conversion_cost = -0.35
        local_unrest = -2
        tolerance_own = 1
		global_missionary_strength = 0.01
        papal_influence = 1
 
        allowed_num_of_buildings = 1
    }
    
    on_built = {
        add_base_tax = 2
    }
    
    on_destroyed = {
        add_base_tax = -2
    }
    
    ai_will_do = {
        factor = 2
        
        modifier = {
            factor = 0
            owner = { num_of_loans = 1 }
        }
        modifier = {
            factor = 0.75
            owner = { is_in_deficit = yes }
        }
        modifier = {
            factor = 0.75
            owner = { NOT = { treasury = 3600 } }
        }
        modifier = {
            factor = 3
            unrest = 5
        }
        modifier = {
            factor = 2.5
            NOT = { religion = owner }
        }
        modifier = {
            factor = 3
            owner = { 
                OR = {
                    religion = catholic
                    religion = orthodox
                    religion = coptic
                    has_idea_group = religious_ideas
                }
            }
        }
    }
}


atlantropa_royal_palace = {
    cost = 4000
    time = 80
    one_per_country = yes
    allow_in_gold_provinces = yes
    onmap = no
    
    potential = {
        always = yes
    }
    
    
    modifier = {
        prestige = 0.5
        legitimacy = 0.5
        republican_tradition = 0.25
        devotion = 0.5
        horde_unity = 0.5
        meritocracy = 0.5
		stability_cost_modifier = -0.1
        allowed_num_of_buildings = 2
        local_development_cost = -0.1
        province_trade_power_modifier = 0.2
        local_tax_modifier = 0.15
        local_institution_spread = 0.2
    }
    
    ai_will_do = {
        factor = 10
        
        modifier = {
            factor = 0
            owner = { num_of_loans = 1 }
        }
        modifier = {
            factor = 0
            owner = { NOT = { treasury = 8000 } }
        }
        modifier = {
            factor = 2
            owner = { prestige = 75 }
        }
        modifier = {
            factor = 1.5
            development = 30
        }
    }
}
great_hospital = {
    cost = 500
    time = 32
    allow_in_gold_provinces = yes
    onmap = no
    
    potential = {
        always = yes
    }

    
    modifier = {
        local_manpower_modifier = 0.1
        local_development_cost = -0.05
        local_unrest = -1
        local_defensiveness = 0.1
        allowed_num_of_buildings = 1
    }
    
    ai_will_do = {
        factor = 1.5
        
        modifier = {
            factor = 0
            owner = { num_of_loans = 2 }
        }
        modifier = {
            factor = 0.5
            owner = { num_of_loans = 1 }
        }
        modifier = {
            factor = 0.75
            owner = { is_in_deficit = yes }
        }
        modifier = {
            factor = 0.75
            owner = { NOT = { treasury = 2600 } }
        }
        modifier = {
            factor = 2
            base_manpower = 4
        }
        modifier = {
            factor = 1.5
            development = 20
        }
        modifier = {
            factor = 2
            owner = { is_at_war = yes }
        }
    }
}